#:kivy 2.2.0
ScreenManager:
    LoginScreen:
    MenuScreenAdmin:
    MenuScreen:
    MorningScreen:
    EveningScreen:
    ToDoScreen:
    AddToDoScreen:
    SetGraphScreen:
    GraphScreen:
    AddUserScreen:

<LoginScreen>:
    name: "login"
    username: username_input
    MDTextField:
        id: username_input
        hint_text: "Enter username"
        #helper_text: "helper message"
        #helper_text_mode: "on_focus"
        pos_hint: {"center_x":0.5, "center_y":0.5}
        size_hint_x: 0.6
        width: 300
    MDRectangleFlatButton:
        text: "Login"
        pos_hint: {"center_x":0.5,"center_y":0.4}
        on_release: app.login_button_pressed()

<MenuScreenAdmin>:
    name: "adminmenu"
    theme_text_color: "Custom"
    MDRectangleFlatButton:
        text: "WAKE UP"
        pos_hint: {"center_x":0.5,"center_y":0.8}
        size_hint: {0.75, 0.08}
        text_color: 252/255, 182/255, 5/255, 1
        line_color: 252/255, 182/255, 5/255, 1
        md_bg_color: 252/255, 182/255, 5/255, 0.2
        on_release: app.wakeup_button_pressed()
    MDRectangleFlatButton:
        text: "REGISTER DAY"
        pos_hint: {"center_x":0.5,"center_y":0.65}
        size_hint: {0.75, 0.08}
        text_color: 5/25, 87/255, 252/255, 1
        line_color: 5/25, 87/255, 252/255, 1
        md_bg_color: 5/25, 87/255, 252/255, 0.2
        on_release: root.manager.current = "evening"
    MDRectangleFlatButton:
        text: "TO-DO LIST"
        pos_hint: {"center_x":0.5,"center_y":0.5}
        size_hint: {0.75, 0.08}
        text_color: 2/255, 235/255, 33/255, 1
        line_color: 2/255, 235/255, 33/255, 1
        md_bg_color: 2/255, 235/255, 33/255, 0.2
        on_release: app.todo_button_pressed()
    MDRectangleFlatButton:
        text: "GRAPH"
        pos_hint: {"center_x":0.5,"center_y":0.35}
        size_hint: {0.75, 0.08}
        text_color: 250/255, 2/255, 167/255, 1
        line_color: 250/255, 2/255, 167/255, 1
        md_bg_color: 250/255, 2/255, 167/255, 0.2
        on_release: app.graph_button_pressed()
    MDRectangleFlatButton:
        text: "ADD USER"
        pos_hint: {"center_x":0.5,"center_y":0.2}
        size_hint: {0.75, 0.08}
        text_color: 250/255, 105/255, 2/255, 1
        line_color: 250/255, 105/255, 2/255, 1
        md_bg_color: 250/255, 105/255, 2/255, 0.2
        on_release: root.manager.current = "adduser"

<MenuScreen>:
    name: "menu"
    theme_text_color: "Custom"
    MDRectangleFlatButton:
        text: "WAKE UP"
        pos_hint: {"center_x":0.5,"center_y":0.8}
        size_hint: {0.75, 0.08}
        text_color: 252/255, 182/255, 5/255, 1
        line_color: 252/255, 182/255, 5/255, 1
        md_bg_color: 252/255, 182/255, 5/255, 0.2
        on_release: app.wakeup_button_pressed()
    MDRectangleFlatButton:
        text: "REGISTER DAY"
        pos_hint: {"center_x":0.5,"center_y":0.65}
        size_hint: {0.75, 0.08}
        text_color: 5/25, 87/255, 252/255, 1
        line_color: 5/25, 87/255, 252/255, 1
        md_bg_color: 5/25, 87/255, 252/255, 0.2
        on_release: root.manager.current = "evening"
    MDRectangleFlatButton:
        text: "TO-DO LIST"
        pos_hint: {"center_x":0.5,"center_y":0.5}
        size_hint: {0.75, 0.08}
        text_color: 2/255, 235/255, 33/255, 1
        line_color: 2/255, 235/255, 33/255, 1
        md_bg_color: 2/255, 235/255, 33/255, 0.2
        on_release: app.todo_button_pressed()
    MDRectangleFlatButton:
        text: "GRAPH"
        pos_hint: {"center_x":0.5,"center_y":0.35}
        size_hint: {0.75, 0.08}
        text_color: 250/255, 2/255, 167/255, 1
        line_color: 250/255, 2/255, 167/255, 1
        md_bg_color: 250/255, 2/255, 167/255, 0.2
        on_release: app.graph_button_pressed()

<MorningScreen>:
    name: "morning"
    MDLabel:
        text: "Today you woke up:"
        theme_text_color: "Custom"
        text_color: 128/255, 126/255, 121/255,1
        pos_hint: {"center_x":0.5, "center_y":0.8}
        font_size: min(root.width, root.height) / 10
        halign: "center"
    MDLabel:
        id: wake_up_time
        pos_hint: {"center_x":0.5, "center_y":0.5}
        font_size: min(root.width, root.height) / 5
        halign: "center"
    MenuButton:
        on_release: app.menu_button_pressed()

<EveningScreen>:
    name: "evening"
    slider_data: [weight_slider.value, walk_slider.value, exercise_slider.value, skillup_slider.value, read_slider.value]
    switch_data: [meditation, ifast]
    MDLabel:
        text: "Weight: "
        pos_hint: {"center_x":0.55, "center_y":0.8}
    MDSlider:
        id: weight_slider
        max: 5
        min: 0
        pos_hint: {"center_x":0.6, "center_y":0.8}
        hint: False
        size_hint: 0.7, 0.1
    MDLabel:
        text: f"{round(50 + weight_slider.value * 10, 1)} kg"
        pos_hint: {"center_x":0.6,"center_y":0.85}
        font_style: "H5"
        halign: "center"
    MDLabel:
        text: "Walking: "
        pos_hint: {"center_x":0.55, "center_y":0.7}
    MDSlider:
        id: walk_slider
        max: 300
        min: 0
        pos_hint: {"center_x":0.6, "center_y":0.7}
        hint: False
        size_hint: 0.7, 0.1
    MDLabel:
        text: f"{int(walk_slider.value) // 60}h {int(walk_slider.value) % 60}m"
        pos_hint: {"center_x":0.6,"center_y":0.75}
        font_style: "H5"
        halign: "center"
    MDLabel:
        text: "Exercise: "
        pos_hint: {"center_x":0.55, "center_y":0.6}
    MDSlider:
        id: exercise_slider
        max: 300
        min: 0
        pos_hint: {"center_x":0.6, "center_y":0.6}
        hint: False
        size_hint: 0.7, 0.1
    MDLabel:
        text: f"{int(exercise_slider.value) // 60}h {int(exercise_slider.value) % 60}m"
        pos_hint: {"center_x":0.6,"center_y":0.65}
        font_style: "H5"
        halign: "center"
    MDLabel:
        text: "Skill-Up: "
        pos_hint: {"center_x":0.55, "center_y":0.5}
    MDSlider:
        id: skillup_slider
        max: 300
        min: 0
        pos_hint: {"center_x":0.6, "center_y":0.5}
        hint: False
        size_hint: 0.7, 0.1
    MDLabel:
        text: f"{int(skillup_slider.value) // 60}h {int(skillup_slider.value) % 60}m"
        pos_hint: {"center_x":0.6,"center_y":0.55}
        font_style: "H5"
        halign: "center"
    MDLabel:
        text: "Read: "
        pos_hint: {"center_x":0.55, "center_y":0.4}
    MDSlider:
        id: read_slider
        max: 300
        min: 0
        pos_hint: {"center_x":0.6, "center_y":0.4}
        hint: False
        size_hint: 0.7, 0.1
    MDLabel:
        text: f"{int(read_slider.value) // 60}h {int(read_slider.value) % 60}m"
        pos_hint: {"center_x":0.6,"center_y":0.45}
        font_style: "H5"
        halign: "center"
    MDLabel:
        text: "Meditation:"
        pos_hint: {"center_x":0.55, "center_y":0.3}
    MDSwitch:
        id: meditation
        pos_hint: {"center_x":0.5, "center_y":0.3}
    MDLabel:
        text: "iFast:"
        pos_hint: {"center_x":0.55, "center_y":0.2}
    MDSwitch:
        id: ifast
        pos_hint: {"center_x":0.5, "center_y":0.2}
    MDRectangleFlatButton:
        text: "Submit"
        pos_hint: {"center_x":0.35, "center_y":0.1}
        size_hint: {0.2, 0.05}
        on_release: app.submit_data_button_pressed()
    MenuButton:
        pos_hint: {"center_x":0.65, "center_y":0.1}
        on_release: app.menu_button_pressed()


<ToDoScreen>:
    name: "todo"
    ScrollView:
        do_scroll_x: "False"
        do_scroll_y: "True"
        pos_hint: {"center_x": 0.5, "top": 0.95}
        size_hint_y: 0.8
        size_hint_x: 0.7
        halign: "center"
        MDList:
            id: container
    MDRectangleFlatButton:
        text: "NEW TASK"
        pos_hint: {"center_x":0.35, "center_y":0.1}
        size_hint: {0.2, 0.05}
        on_release: app.new_task_button_pressed()
    MenuButton:
        pos_hint: {"center_x":0.65, "center_y":0.1}
        on_release: app.menu_button_pressed()

<AddToDoScreen>:
    name: "addtodo"
    task: task_input
    detail: detail_input
    MDTextField:
        id: task_input
        hint_text: "Enter task"
        pos_hint: {"center_x":0.5, "center_y":0.6}
        size_hint_x: None
        width: 300
    MDTextField:
        id: detail_input
        hint_text: "Enter details"
        pos_hint: {"center_x":0.5, "center_y":0.5}
        size_hint_x: None
        width: 300

    MDRectangleFlatButton:
        text: "Add Task"
        pos_hint: {"center_x":0.5,"center_y":0.4}
        on_release: app.add_task_button_pressed()
    MDRectangleFlatButton:
        text: "Menu"
        pos_hint: {"center_x":0.5,"center_y":0.3}
        on_release: app.menu_button_pressed()

<SetGraphScreen>:
    name: "setgraph"
    box_data: [walking_box, exercise_box, skillup_box, reading_box]
    MDLabel:
        id: date_label
        text: ""
        font_size: min(root.width, root.height) / 20
        pos_hint: {"center_y":0.85}
        halign: "center"
    MDRaisedButton:
        text: "Set Date"
        pos_hint: {"center_x":0.5,"center_y":0.92}
        on_release: app.open_date_picker()
    BoxLayout:
        orientation:"vertical"
        pos_hint: {"center_x":0.5,"top":0.75}
        GridLayout:
            cols: 2
            row_default_height: 90
            row_force_default: True
            MDLabel:
                text: "Walking"
                font_size: min(root.width, root.height) / 14
                halign: "center"
            CheckBox:
                id: walking_box
                halign: "left"
            MDLabel:
                text: "Exercising"
                font_size: min(root.width, root.height) / 14
                halign: "center"
            CheckBox:
                id: exercise_box
                halign: "left"
            MDLabel:
                text: "Skill-Up"
                font_size: min(root.width, root.height) / 14
                halign: "center"
            CheckBox:
                id: skillup_box
                halign: "left"
            MDLabel:
                text: "Reading"
                font_size: min(root.width, root.height) / 14
                halign: "center"
            CheckBox:
                id: reading_box
                halign: "left"
    MDRectangleFlatButton:
        text: "Submit"
        pos_hint: {"center_x":0.35, "center_y":0.1}
        size_hint: {0.2, 0.05}
        on_release: app.get_graph_input_button_pressed()
    MenuButton:
        pos_hint: {"center_x":0.65, "center_y":0.1}
        on_release: app.menu_button_pressed()


<GraphScreen>:
    name: "graph"
    BoxLayout:
        id: bx1
        size_hint_y: 0.4
        pos_hint: {"top":1}
        orientation:"vertical"
    BoxLayout:
        id: bx2
        size_hint_y: 0.4
        pos_hint: {"top":0.58}
        orientation:"vertical"
    MenuButton:
        pos_hint: {"center_x":0.5, "center_y":0.1}
        on_release: app.menu_button_pressed()

<AddUserScreen>:
    name: "adduser"
    new_user_username: username_input
    #new_user_pw: pw_input
    MDTextField:
        id: username_input
        hint_text: "Enter username"
        pos_hint: {"center_x":0.5, "center_y":0.6}
        size_hint_x: 0.6
    #MDTextField:
    #    id: pw_input
    #    hint_text: "Enter password"
    #    pos_hint: {"center_x":0.5, "center_y":0.5}
    #    size_hint_x: 0.3

    MDRectangleFlatButton:
        text: "Add User"
        pos_hint: {"center_x":0.5,"center_y":0.2}
        on_release: app.add_user_button_pressed()
    MenuButton:
        pos_hint: {"center_x":0.5, "center_y":0.1}
        on_release: app.menu_button_pressed()
